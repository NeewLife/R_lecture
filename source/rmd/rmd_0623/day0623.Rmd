---
title: "8장"
output:
  html_document:
    toc: true
    toc_float: true
    keep_md: true
date: '2022-06-23 10:00:00'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

  
  
# 8장  
  
  
## 통계
- 기술통계 : 평균, 최솟값, 최댓값
- 추론통계 : 변수 간의 관계를 파악 / 새로운 사실을 추정  

  + (중요)평균차이 검정
    - 수치형 데이터
    - 가설검정 : 각 그룸간의 평균의 차이를 검정
    ex) '남자'의 평균 키와 '여자'의 평균 키는 "차이"가 있을 것이다.
    - '남자'의 평균 키가 '여자'의 평균 키보다 크다. 라는 결론을 내리려면  
    이번 측정의 결과가 우연한 측정이 아니라는 것을 통계적으로 검정해야된다.  
    ex) '여자' 배구선수 평균 키는 '남자'의 평균 키보다 큰데?  
    '여자' 배구선수의 측정은 우연한 측정이라서 결과에 사용할 수 없음
  
  
  
  + 교차분석 (= 빈도분석)
    - 범주형 데이터
    - 가설검정 : 각 범주별 빈도를 활용해서 관계성을 검정
    ex) '아파트의 크기'는 'TV의 크기'와 관계가 있을 것이다.
      + '아파트의 크기' = '소형 아파트','대형 아파트'
      + 'TV의 크기' = '소형 TV','대형 TV'
  
  + 상관관계 분석
    - 수치형 데이터
    - -1 <= r <= 1 로 두 변수간의 상관관계를 의미한다.
      + 절댓값이 1에 가까울 수록 완전 정의 관계, 역의 관계이다.
      + 절댓값이 0에 가까울 수록 상관관계가 거의 없다고 해석한다.
  
  
  + (중요)단순회귀분석 : 인과관계 분석
    - y = ax + b
    - ex1) 기온, 판매량
    - 가설검정
      + 기온(독립변수=x)이 판매량(종속변수=y)에 긍정적 or 부정적 영향을 주고 있을 것이다.  
      
    - ex2) 월급, 외식횟수
    - 가설검정
      + 월급(독립변수=x)이 증가하면 외식횟수(종속변수=y)가 증가할 것 이다.  

## 통계 검정
### 가설
- Hypothesis
---> 공부 방법 : 선행연구, 해당 분석방법의 가설 설정 예시 참고

- 연구 -> 내가 궁금한 것을 찾는 것
  + 남자의 평균 키와 여자의 평균 키는 차이가 있을 것인가?
- 귀무가설 : 두 그룹간의 평균 차이가 없다.
- 대립가설 : 두 그룹간의 평균 차이가 있다. (보통 내가 궁금한 것)  
- 유의수준 : 오류를 범할 확률
- 가설검정에서 인정하는 유의수준(<==> 신뢰수준)
  + 5%, 1%, 0.1%, 또는 10%(각 분야마다 기준이 달라진다)


- 오차범위
  + A후보의 44%
  + B후보의 42%
    - 오차범위 안에 있다 -> 다시 조사하면 바뀔 수 있다.
    - 오차범위 밖에 있다 -> 바뀔 수 없다.
  
  
- 어떻게 데이터를 입력하는지 확인
- p-value, 유의수준 0.05 이상 : 귀무가설, 0.05 이내 --> 대립가설
  
  
- 데이터 불러오기
```{r}
mpg1 <- read.csv("mpg1.csv", stringsAsFactors = FALSE)
str(mpg1)
```

- 시각화
```{r}
library(ggplot2)
ggplot(mpg1, aes(x = trans, y = cty)) +
  # trans 변수는 chr(문자형)이고, cty 변수는 int(정수형)이므로 boxplot 그래프를 쓴다.
  geom_boxplot()
```

- t.test 검정
  + 귀무가설 : auto와 manual의 cty 평균은 차이가 없다.
  + 대립가설 : auto와 manual의 cty 평균은 차이가 있다.
```{r}
t.test(data = mpg1, cty ~ trans)
            # 종속변수 ~ 독립변수
            # 반응변수 ~ 설명변수
            #     y          x

```
  
  - 'p-value = 1.263e-05' 에서 p-value 값이 유의수준이 0.05보다 작으므로,  
  
  이 결과는 대립가설인 'auto와 manual의 cty 평균은 차이가 있다.' 로 설명할 수 있다.
  
- 두 그룹의 평균 차이 검정
  + 사전 필수 검정
  + 등분산 검정
    + 두 그룹간의 분산이 비슷하면 --> t.test (모수 검정)
    + 두 그룹간의 분산이 다르면   --> 비모수 검정
  - 보통 대립가설에 알고 싶은 결과를 대입하지만, <br>등분산 검정에서의 귀무가설, 대립가설은 정의된 것임
    + 귀무가설 : 두 그룹간의 분산이 비슷하다
      - 등분산 검정 에서 p-value > 0.05 되어야 t.test가 가능
    + 대립가설 : 두 그룹간의 분산이 다르다
    
  
```{r}
var.test(data = mpg1, cty~trans)
```

```{r}
ggplot(mpg1, aes(x = cty, fill = trans)) +
  # geom_histogram() +
  geom_density(alpha = 0.1)
```

### 교차 분석
- 범주형 변수들이 관계가 있다는 것을 검정
- 비율에 차이가 있는지 검정
- 교차분석 검정은 chisq.test() 함수로 진행
  + 귀무가설 : trans에 따라 drv(4, f, r)의 (비율)차이가 없다.
  + 대립가설 : trans에 따라 drv의 차이가 있다.

<br>  

- 빈도표 / 비율
```{r}
table(mpg1$trans, mpg1$drv)   # 교차분석
```

- 비율
```{r}
prop.table(table(mpg1$trans, mpg1$drv), 1)
```

- auto 4륜 구동(4)인 47.8%
- manual 전륜 구동(f) 53.2% 가장 많음
- 별 차이 없어보이는데.. 실제 통계적으로 차이가 있는지 검정
  + 귀무가설 : trans에 따라 drv(4, f, r)의 (비율)차이가 없다.
  + 대립가설 : trans에 따라 drv의 차이가 있다.
 
```{r}
chisq.test(mpg1$trans, mpg1$drv)
```
  - p-value 값이 0.05 보다 크므로 귀무가설이 성립된다.
  - 결론 : "trans에 따라 drv(4, f, r)의 (비율)차이가 없다."
<br>

### 상관관계분석
- 변수들의 상관관계를 증명()
- cty와 hwy는 상관관계가 있는지를 증명
- 상관관계분석은 cor.test() 함수로 진행
  + 귀무가설 : cty와 hwy는 상관관계가 없다.
  + 대립가설 : cty와 hwy는 상관관계가 있다.
```{r}
mpg1 <-read.csv("mpg1.csv", stringsAsFactors = FALSE)
cor.test(mpg1$cty, mpg1$hwy)    # 상관관계분석
```

- 'p-value < 2.2e-16' 에서 p-value 값이 0.05보다 작으므로 대립가설이 성립한다.
- cor(상관관계계수) = 0.9559159 이므로 상관관계가 1에 가까워서 매우 높다.
- 결론 : "cty와 hwy는 유의미하게 매우 높은 상관관계에 있다."

